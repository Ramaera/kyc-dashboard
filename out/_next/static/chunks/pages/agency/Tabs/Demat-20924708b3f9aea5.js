(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2593],{89941:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agency/Tabs/Demat",function(){return e(37610)}])},37610:function(n,t,e){"use strict";e.r(t);var a=e(34051),o=e.n(a),r=e(85893),i=e(42480),d=e(55511),u=e(50319),c=e(8987),m=e(86886),s=e(50135),l=e(87357),p=e(11057),_=e(67294),f=e(86501),y=e(77502),v=e(9473),h=e(61636),b=e(99099),P=e(85109),g=e(71455);function D(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=n[e];return a}function x(n,t,e,a,o,r,i){try{var d=n[r](i),u=d.value}catch(c){return void e(c)}d.done?t(u):Promise.resolve(u).then(a,o)}function A(n){return function(){var t=this,e=arguments;return new Promise((function(a,o){var r=n.apply(t,e);function i(n){x(r,a,o,i,d,"next",n)}function d(n){x(r,a,o,i,d,"throw",n)}i(void 0)}))}}function j(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function S(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},a=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),a.forEach((function(t){j(n,t,e[t])}))}return n}function k(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var a,o,r=[],i=!0,d=!1;try{for(e=e.call(n);!(i=(a=e.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(u){d=!0,o=u}finally{try{i||null==e.return||e.return()}finally{if(d)throw o}}return r}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return D(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return D(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var n=(0,v.I0)(),t=(0,v.v9)((function(n){return n.foundUser.foundUser})),e=(0,v.v9)((function(n){return n.allUsers.allTheUsers})),a=(0,_.useState)(null),D=a[0],x=a[1],j=(0,_.useState)(null),$=j[0],w=j[1],U=(0,_.useState)(),Z=U[0],C=U[1],I=(0,_.useState)(!1),N=I[0],T=I[1],O=(0,_.useState)(!1),R=O[0],E=O[1],F=(0,_.useState)(!1),B=F[0],H=F[1],L=k((0,u.D)(y.p1),1)[0],V=k((0,u.D)(y.HF),2),K=V[0],X=V[1].data,J=function(n,e,a){var o,r=t,i=[];return null===t||void 0===t||null===(o=t.documents)||void 0===o||o.map((function(t){t.id===n?i.push(S({},t,{url:e})):i.push(t)})),S({},r,{documents:i,demat_account:a})},W=function(n,e){var a,o=t,r=[];return null===t||void 0===t||null===(a=t.documents)||void 0===a||a.map((function(t){t.id===n?r.push(S({},t,{status:e})):r.push(t)})),S({},o,{documents:r})},q=function(n){return!!n||(alert("Invalid Image"),!1)},z=function(){var t=A(o().mark((function t(a,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K({variables:{id:a,status:r}});case 2:t.sent,n((0,h.Hn)(W(Z.id,r))),n((0,b.UF)((0,P.Z)(e,W(Z.id,r))));case 5:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),M=function(){var a=A(o().mark((function a(){var r;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(q($)){a.next=3;break}return a.abrupt("return");case 3:if(E(!0),a.prev=4,!D){a.next=10;break}return a.next=8,L({variables:{id:t.id,demat_account:D}});case 8:n((0,h.Hn)(S({},t,{demat_account:D}))),n((0,b.UF)((0,P.Z)(e,S({},t,{demat_account:D}))));case 10:if(r="",!N){a.next=17;break}return a.next=14,(0,d.Z)($);case 14:r=a.sent,a.next=18;break;case 17:r=$;case 18:if(!Z){a.next=26;break}return a.next=21,L({variables:{id:t.id,documentId:Z.id,url:r}});case 21:n((0,h.Hn)(J(Z.id,r,D))),n((0,b.UF)((0,P.Z)(e,J(Z.id,r,D)))),f.ZP.success("Demat Details Updated "),a.next=27;break;case 26:console.log("can't create document");case 27:a.next=31;break;case 29:a.prev=29,a.t0=a.catch(4);case 31:E(!1);case 32:case"end":return a.stop()}}),a,null,[[4,29]])})));return function(){return a.apply(this,arguments)}}();return(0,_.useEffect)((function(){var n,e;(t&&x(t.demat_account),t&&t.documents&&(null===t||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0)&&(null===t||void 0===t||null===(e=t.documents)||void 0===e||e.find((function(n){n.title.toLowerCase()===i.Z.demat_document.items[0].id&&(C(n),w(n.url))})))}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,r.jsx)(s.Z,{id:"outlined",label:"Demat Account No.",type:"text",fullWidth:!0,value:D,variant:"outlined",onChange:function(n){x(n.target.value),H(!0)}})}),$&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.TV,{children:(0,r.jsx)(g.HI,{src:"object"==typeof $?URL.createObjectURL($):$,children:(0,r.jsx)("img",{style:{marginTop:"10px",cursor:"pointer"},src:"object"==typeof $?URL.createObjectURL($):$,height:200,width:200})})}),(0,r.jsxs)(l.Z,{children:["Status :"," ",(0,r.jsx)("span",{style:{color:Z?"APPROVED"===Z.status?"green":"REJECTED"===Z.status&&"red":""},children:X?X.updateDocumentStatusByAdmin.status:Z?Z.status:null})]}),(0,r.jsx)(l.Z,{children:(0,r.jsxs)(m.ZP,{children:[(0,r.jsx)(p.Z,{onClick:function(){return z(Z.id,"APPROVED")},variant:"outlined",color:"success",children:"Approve"}),(0,r.jsx)(p.Z,{onClick:function(){return z(Z.id,"REJECTED")},variant:"outlined",color:"error",sx:{ml:2},children:"Reject"})]})})]}),(0,r.jsxs)(m.ZP,{container:!0,pt:3,pb:2,pr:2,spacing:2,children:[$&&(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:4,lg:3.5,children:(0,r.jsxs)(p.Z,{variant:"contained",component:"label",children:["Upload Demat Account Details",(0,r.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(n){n.target.files.length>0&&(w(n.target.files[0]),T(!0),H(!0))}})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:4,lg:3.5,children:(0,r.jsx)(l.Z,{component:"form",children:(0,r.jsx)(c.Z,{loading:R,fullWidth:!0,disabled:!B,variant:"contained",onClick:function(){M()},children:"Submit"})})}),(0,r.jsx)(f.x7,{position:"bottom-right",reverseOrder:!1})]}),(0,r.jsx)(m.ZP,{item:!0,xs:4})]})}},77502:function(n,t,e){"use strict";e.d(t,{Fm:function(){return d},HF:function(){return i},QX:function(){return r},p1:function(){return o}});var a=e(81621),o=(0,a.Ps)("\nmutation updateDataByAdmin (\n$id: String!,\n$name: String,\n$father_or_husband_name: String,\n$date_of_birth: String,\n$mobile_number: String,\n$alternate_mobile_number: String,\n$email: String,\n$demat_account: String,\n$nomineeName: String,\n$nomineeRelationship: String,\n$documentId: String,\n$url: String,\n$amount: Int,\n){updateDataByAdmin(\n  data: \n  { \n      id: $id\n      name: $name\n      father_or_husband_name: $father_or_husband_name\n      date_of_birth:$date_of_birth\n      mobile_number:$mobile_number\n      alternate_mobile_number:$alternate_mobile_number\n      email:$email\n      demat_account:$demat_account\n      nomineeName: $nomineeName\n      nomineeRelationship: $nomineeRelationship\n      documentId: $documentId\n      url: $url\n      amount: $amount\n  })\n  {\n    name\n    documents{\n      id\n      title\n      url\n      amount\n    }\n  }\n}"),r=(0,a.Ps)("\nmutation updateStatus (\n$id: String!,\n$kyc: KYC!,\n){updateStatus(\n  data: \n  { \n      id: $id\n      kyc: $kyc\n  })\n  {\n    kyc\n  }\n}"),i=(0,a.Ps)("\nmutation updateDocumentStatusByAdmin (\n$id: String!,\n$status: STATUS!,\n){updateDocumentStatusByAdmin(\n  data: \n  { \n      id: $id\n      status: $status\n  })\n  {\n    id\n    status\n  }\n}"),d=(0,a.Ps)("\nquery getAllKycHandler {\n  getAllKycHandler{\n    userId\n    handlerId\n    updatedKycStatus\n  }\n}\n")},42480:function(n,t){"use strict";t.Z={aadhar:{id:"aadhar",name:"Aadhar Card",status:"",items:[{id:"aadhar_front",name:"AADHAR Card Front",status:""},{id:"aadhar_back",name:"AADHAR Card Back",status:""}]},pancard:{id:"pancard",name:"Pancard",status:"",items:[{id:"pancard",name:"Pan Card",status:""}]},avatar:{id:"photo",name:"Photo",status:"",items:[{id:"avatar",name:"Passport Size Photo",status:""}]},voterId:{id:"voterId",name:"Voter Id Card",status:"Not Uploaded",items:[{id:"voterid_front",name:"Voter Id Front",status:""},{id:"voterid_back",name:"Voted Id Card Back",status:""}]},passbook:{name:"Passbook  or Bank Statement",id:"passbook",status:"Not Uploaded",items:[{id:"passbook",name:"Bank Passbook Or Bank Statement",status:"Not Uploaded"}]},payment_proof:{name:"Payment Proof",id:"payment_proof",status:"Not Uploaded",items:[{id:"payment_proof",name:"Payment Proof"}]},agency_payment_proof:{name:"Agency Payment Proof",id:"agency_payment_proof",status:"Not Uploaded",items:[{id:"agency_payment_proof",name:"Agency Payment Proof"}]},additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},to_advance_payment_proof:{name:"To Advance Payment Proof",id:"to_advance_payment_proof",status:"Not Uploaded",items:[{id:"to_advance_payment_proof",name:"To Advance Payment Proof"}]},to_advance_additional_documents:{name:"To Advance Additional Payment Document",id:"to_advance_additional_payment_doc",items:[{id:"to_advance_additional_payment_doc2",name:"To Advance Payment Document"},{id:"to_advance_additional_payment_doc3",name:"To Advance Payment Document"},{id:"to_advance_additional_payment_doc4",name:"To Advance Payment Document"},{id:"to_advance_additional_payment_doc5",name:"To Advance Payment Document"}]},driving_license:{name:"Driving License",id:"driving_license",status:"Not Uploaded",items:[{id:"driving_license_front",name:"Driving License Front",status:""},{id:"driving_license_back",name:"Driving License Back",status:""}]},nominee_aadhar:{name:"Nominee Aadhar",id:"nominee_aadhar",status:"Not Uploaded",items:[{id:"nominee_aadhar_front",name:"AADHAR Card Front",status:""},{id:"nominee_aadhar_back",name:"AADHAR Card Back",status:""}]},demat_document:{name:"Demat Document",id:"demat_document",status:"Not Uploaded",items:[{id:"demat_document",name:"Demat Document",status:""}]},payment_additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},project_payment:{name:"Project Payment",id:"project_payment",items:[{id:"project_payment_1",name:"Payment Document"},{id:"project_payment_2",name:"Payment Document"},{id:"project_payment_3",name:"Payment Document"},{id:"project_payment_4",name:"Payment Document"},{id:"project_payment_5",name:"Payment Document"}]}}},85109:function(n,t){"use strict";t.Z=function(n,t){var e=[];return n.map((function(n){t.id===n.id?e.push(t):e.push(n)})),e}},55511:function(n,t,e){"use strict";var a=e(34051),o=e.n(a),r=e(7155),i=e(6154);function d(n,t,e,a,o,r,i){try{var d=n[r](i),u=d.value}catch(c){return void e(c)}d.done?t(u):Promise.resolve(u).then(a,o)}var u=function(){var n,t=(n=o().mark((function n(t){var e,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=new FormData).append("document",t),n.next=4,i.Z.post("".concat(r.Z.API_URL,"/documents/upload"),e,{headers:{"Content-Type":"multipart/form-data"}});case 4:return a=n.sent,n.abrupt("return",a.data.url);case 6:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(a,o){var r=n.apply(t,e);function i(n){d(r,a,o,i,u,"next",n)}function u(n){d(r,a,o,i,u,"throw",n)}i(void 0)}))});return function(n){return t.apply(this,arguments)}}();t.Z=u}},function(n){n.O(0,[6093,9990,9448,7999,1880,7457,7058,315,8584,8549,6154,3284,9774,2888,179],(function(){return t=89941,n(n.s=t);var t}));var t=n.O();_N_E=t}]);