(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2593],{89941:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agency/Tabs/Demat",function(){return e(37610)}])},37610:function(n,t,e){"use strict";e.r(t);var a=e(34051),r=e.n(a),i=e(85893),o=e(42480),u=e(55511),d=e(50319),c=e(8987),s=e(86886),m=e(50135),l=e(87357),p=e(11057),f=e(67294),_=e(86501),y=e(77502),h=e(9473),v=e(61636),b=e(99099),g=e(85109),P=e(71455);function x(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=n[e];return a}function D(n,t,e,a,r,i,o){try{var u=n[i](o),d=u.value}catch(c){return void e(c)}u.done?t(d):Promise.resolve(d).then(a,r)}function j(n){return function(){var t=this,e=arguments;return new Promise((function(a,r){var i=n.apply(t,e);function o(n){D(i,a,r,o,u,"next",n)}function u(n){D(i,a,r,o,u,"throw",n)}o(void 0)}))}}function S(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function k(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},a=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),a.forEach((function(t){S(n,t,e[t])}))}return n}function A(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var a,r,i=[],o=!0,u=!1;try{for(e=e.call(n);!(o=(a=e.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(d){u=!0,r=d}finally{try{o||null==e.return||e.return()}finally{if(u)throw r}}return i}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return x(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return x(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var n=(0,h.I0)(),t=(0,h.v9)((function(n){return n.foundUser.foundUser})),e=(0,h.v9)((function(n){return n.allUsers.allTheUsers})),a=(0,f.useState)(null),x=a[0],D=a[1],S=(0,f.useState)(null),$=S[0],w=S[1],Z=(0,f.useState)(),U=Z[0],C=Z[1],I=(0,f.useState)(!1),N=I[0],O=I[1],R=(0,f.useState)(!1),E=R[0],F=R[1],B=(0,f.useState)(!1),H=B[0],T=B[1],L=A((0,d.D)(y.p1),1)[0],V=A((0,d.D)(y.HF),2),K=V[0],X=V[1].data,J=function(n,e,a){var r,i=t,o=[];return null===t||void 0===t||null===(r=t.documents)||void 0===r||r.map((function(t){t.id===n?o.push(k({},t,{url:e})):o.push(t)})),k({},i,{documents:o,demat_account:a})},W=function(n,e){var a,r=t,i=[];return null===t||void 0===t||null===(a=t.documents)||void 0===a||a.map((function(t){t.id===n?i.push(k({},t,{status:e})):i.push(t)})),k({},r,{documents:i})},q=function(n){return!!n||(alert("Invalid Image"),!1)},z=function(){var t=j(r().mark((function t(a,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K({variables:{id:a,status:i}});case 2:t.sent,n((0,v.Hn)(W(U.id,i))),n((0,b.UF)((0,g.Z)(e,W(U.id,i))));case 5:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),M=function(){var a=j(r().mark((function a(){var i;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(q($)){a.next=3;break}return a.abrupt("return");case 3:if(F(!0),a.prev=4,!x){a.next=10;break}return a.next=8,L({variables:{id:t.id,demat_account:x}});case 8:n((0,v.Hn)(k({},t,{demat_account:x}))),n((0,b.UF)((0,g.Z)(e,k({},t,{demat_account:x}))));case 10:if(i="",!N){a.next=17;break}return a.next=14,(0,u.Z)($);case 14:i=a.sent,a.next=18;break;case 17:i=$;case 18:if(!U){a.next=26;break}return a.next=21,L({variables:{id:t.id,documentId:U.id,url:i}});case 21:n((0,v.Hn)(J(U.id,i,x))),n((0,b.UF)((0,g.Z)(e,J(U.id,i,x)))),_.ZP.success("Demat Details Updated "),a.next=27;break;case 26:console.log("can't create document");case 27:a.next=31;break;case 29:a.prev=29,a.t0=a.catch(4);case 31:F(!1);case 32:case"end":return a.stop()}}),a,null,[[4,29]])})));return function(){return a.apply(this,arguments)}}();return(0,f.useEffect)((function(){var n,e;(t&&D(t.demat_account),t&&t.documents&&(null===t||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0)&&(null===t||void 0===t||null===(e=t.documents)||void 0===e||e.find((function(n){n.title.toLowerCase()===o.Z.demat_document.items[0].id&&(C(n),w(n.url))})))}),[t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsx)(m.Z,{id:"outlined",label:"Demat Account No.",type:"text",fullWidth:!0,value:x,variant:"outlined",onChange:function(n){D(n.target.value),T(!0)}})}),$&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.TV,{children:(0,i.jsx)(P.HI,{src:"object"==typeof $?URL.createObjectURL($):$,children:(0,i.jsx)("img",{style:{marginTop:"10px",cursor:"pointer"},src:"object"==typeof $?URL.createObjectURL($):$,height:200,width:200})})}),(0,i.jsxs)(l.Z,{children:["Status :"," ",(0,i.jsx)("span",{style:{color:U?"APPROVED"===U.status?"green":"REJECTED"===U.status&&"red":""},children:X?X.updateDocumentStatusByAdmin.status:U?U.status:null})]}),(0,i.jsx)(l.Z,{children:(0,i.jsxs)(s.ZP,{children:[(0,i.jsx)(p.Z,{onClick:function(){return z(U.id,"APPROVED")},variant:"outlined",color:"success",children:"Approve"}),(0,i.jsx)(p.Z,{onClick:function(){return z(U.id,"REJECTED")},variant:"outlined",color:"error",sx:{ml:2},children:"Reject"})]})})]}),(0,i.jsxs)(s.ZP,{container:!0,pt:3,pb:2,pr:2,spacing:2,children:[$&&(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3.5,children:(0,i.jsxs)(p.Z,{variant:"contained",component:"label",children:["Upload Demat Account Details",(0,i.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(n){n.target.files.length>0&&(w(n.target.files[0]),O(!0),T(!0))}})]})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3.5,children:(0,i.jsx)(l.Z,{component:"form",children:(0,i.jsx)(c.Z,{loading:E,fullWidth:!0,disabled:!H,variant:"contained",onClick:function(){M()},children:"Submit"})})}),(0,i.jsx)(_.x7,{position:"bottom-right",reverseOrder:!1})]}),(0,i.jsx)(s.ZP,{item:!0,xs:4})]})}},77502:function(n,t,e){"use strict";e.d(t,{Fm:function(){return u},HF:function(){return o},QX:function(){return i},p1:function(){return r}});var a=e(81621),r=(0,a.Ps)("\nmutation updateDataByAdmin (\n$id: String!,\n$name: String,\n$father_or_husband_name: String,\n$date_of_birth: String,\n$mobile_number: String,\n$alternate_mobile_number: String,\n$email: String,\n$demat_account: String,\n$nomineeName: String,\n$nomineeRelationship: String,\n$documentId: String,\n$url: String,\n$amount: Int,\n){updateDataByAdmin(\n  data: \n  { \n      id: $id\n      name: $name\n      father_or_husband_name: $father_or_husband_name\n      date_of_birth:$date_of_birth\n      mobile_number:$mobile_number\n      alternate_mobile_number:$alternate_mobile_number\n      email:$email\n      demat_account:$demat_account\n      nomineeName: $nomineeName\n      nomineeRelationship: $nomineeRelationship\n      documentId: $documentId\n      url: $url\n      amount: $amount\n  })\n  {\n    name\n    documents{\n      id\n      title\n      url\n      amount\n    }\n  }\n}"),i=(0,a.Ps)("\nmutation updateStatus (\n$id: String!,\n$kyc: KYC!,\n){updateStatus(\n  data: \n  { \n      id: $id\n      kyc: $kyc\n  })\n  {\n    kyc\n  }\n}"),o=(0,a.Ps)("\nmutation updateDocumentStatusByAdmin (\n$id: String!,\n$status: STATUS!,\n){updateDocumentStatusByAdmin(\n  data: \n  { \n      id: $id\n      status: $status\n  })\n  {\n    id\n    status\n  }\n}"),u=(0,a.Ps)("\nquery getAllKycHandler {\n  getAllKycHandler{\n    userId\n    handlerId\n    updatedKycStatus\n  }\n}\n")},42480:function(n,t){"use strict";t.Z={aadhar:{id:"aadhar",name:"Aadhar Card",status:"",items:[{id:"aadhar_front",name:"AADHAR Card Front",status:""},{id:"aadhar_back",name:"AADHAR Card Back",status:""}]},pancard:{id:"pancard",name:"Pancard",status:"",items:[{id:"pancard",name:"Pan Card",status:""}]},avatar:{id:"photo",name:"Photo",status:"",items:[{id:"avatar",name:"Passport Size Photo",status:""}]},voterId:{id:"voterId",name:"Voter Id Card",status:"Not Uploaded",items:[{id:"voterid_front",name:"Voter Id Front",status:""},{id:"voterid_back",name:"Voted Id Card Back",status:""}]},passbook:{name:"Passbook  or Bank Statement",id:"passbook",status:"Not Uploaded",items:[{id:"passbook",name:"Bank Passbook Or Bank Statement",status:"Not Uploaded"}]},payment_proof:{name:"Payment Proof",id:"payment_proof",status:"Not Uploaded",items:[{id:"payment_proof",name:"Payment Proof"}]},agency_payment_proof:{name:"Agency Payment Proof",id:"agency_payment_proof",status:"Not Uploaded",items:[{id:"agency_payment_proof",name:"Agency Payment Proof"}]},additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},driving_license:{name:"Driving License",id:"driving_license",status:"Not Uploaded",items:[{id:"driving_license_front",name:"Driving License Front",status:""},{id:"driving_license_back",name:"Driving License Back",status:""}]},nominee_aadhar:{name:"Nominee Aadhar",id:"nominee_aadhar",status:"Not Uploaded",items:[{id:"nominee_aadhar_front",name:"AADHAR Card Front",status:""},{id:"nominee_aadhar_back",name:"AADHAR Card Back",status:""}]},demat_document:{name:"Demat Document",id:"demat_document",status:"Not Uploaded",items:[{id:"demat_document",name:"Demat Document",status:""}]},payment_additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},project_payment:{name:"Project Payment",id:"project_payment",items:[{id:"project_payment_1",name:"Payment Document"},{id:"project_payment_2",name:"Payment Document"},{id:"project_payment_3",name:"Payment Document"},{id:"project_payment_4",name:"Payment Document"},{id:"project_payment_5",name:"Payment Document"}]}}},85109:function(n,t){"use strict";t.Z=function(n,t){var e=[];return n.map((function(n){t.id===n.id?e.push(t):e.push(n)})),e}},55511:function(n,t,e){"use strict";var a=e(34051),r=e.n(a),i=e(7155),o=e(6154);function u(n,t,e,a,r,i,o){try{var u=n[i](o),d=u.value}catch(c){return void e(c)}u.done?t(d):Promise.resolve(d).then(a,r)}var d=function(){var n,t=(n=r().mark((function n(t){var e,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=new FormData).append("document",t),n.next=4,o.Z.post("".concat(i.Z.API_URL,"/documents/upload"),e,{headers:{"Content-Type":"multipart/form-data"}});case 4:return a=n.sent,n.abrupt("return",a.data.url);case 6:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(a,r){var i=n.apply(t,e);function o(n){u(i,a,r,o,d,"next",n)}function d(n){u(i,a,r,o,d,"throw",n)}o(void 0)}))});return function(n){return t.apply(this,arguments)}}();t.Z=d}},function(n){n.O(0,[6093,9990,1162,4789,2937,7058,315,8584,8549,6154,3284,9774,2888,179],(function(){return t=89941,n(n.s=t);var t}));var t=n.O();_N_E=t}]);