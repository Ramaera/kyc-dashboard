(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2599],{63089:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agency/Tabs/Nominee",function(){return t(6397)}])},6397:function(n,e,t){"use strict";t.r(e);var a=t(34051),r=t.n(a),i=t(85893),o=t(2734),u=t(86886),s=t(50135),d=t(87357),c=t(11057),m=t(67720),l=(t(93491),t(37070),t(19662),t(8987)),p=t(67294),f=t(50319),h=t(42480),y=t(86501),_=t(77502),v=t(9473),b=t(55511),x=t(61636),g=t(99099),P=t(85109),j=t(71455);function S(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=n[t];return a}function A(n,e,t,a,r,i,o){try{var u=n[i](o),s=u.value}catch(d){return void t(d)}u.done?e(s):Promise.resolve(s).then(a,r)}function D(n){return function(){var e=this,t=arguments;return new Promise((function(a,r){var i=n.apply(e,t);function o(n){A(i,a,r,o,u,"next",n)}function u(n){A(i,a,r,o,u,"throw",n)}o(void 0)}))}}function k(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),a.forEach((function(e){k(n,e,t[e])}))}return n}function $(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var a,r,i=[],o=!0,u=!1;try{for(t=t.call(n);!(o=(a=t.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(s){u=!0,r=s}finally{try{o||null==t.return||t.return()}finally{if(u)throw r}}return i}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return S(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.default=function(){var n=(0,v.I0)(),e=(0,v.v9)((function(n){return n.foundUser.foundUser})),t=(0,v.v9)((function(n){return n.allUsers.allTheUsers})),a=$((0,f.D)(_.p1),1)[0],S=$((0,f.D)(_.HF),2),A=S[0],k=S[1].data,w=(0,p.useState)(""),R=w[0],C=w[1],N=(0,p.useState)(""),U=N[0],E=N[1],O=(0,p.useState)(!1),B=O[0],I=O[1],F=((0,o.Z)(),(0,p.useState)(!1)),T=F[0],L=F[1],H=(0,p.useState)(!1),V=H[0],J=H[1],K=(0,p.useState)(""),X=K[0],W=K[1],q=(0,p.useState)(""),z=q[0],M=q[1],Q=(0,p.useState)(!1),Y=Q[0],G=Q[1],nn=(0,p.useState)(),en=nn[0],tn=nn[1],an=(0,p.useState)(),rn=an[0],on=an[1],un=function(n,t){var a,r=e,i=[];return null===e||void 0===e||null===(a=e.documents)||void 0===a||a.map((function(e){e.id===n?i.push(Z({},e,{status:t})):i.push(e)})),Z({},r,{documents:i})},sn=function(n,t){var a,r=e,i=[];return null===e||void 0===e||null===(a=e.documents)||void 0===a||a.map((function(e){e.id===n?i.push(Z({},e,{url:t})):i.push(e)})),Z({},r,{documents:i})},dn=function(){var e=D(r().mark((function e(a,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({variables:{id:a,status:i}});case 2:n((0,x.Hn)(un(a,i))),n((0,g.UF)((0,P.Z)(t,un(a,i))));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),cn=function(){var i=D(r().mark((function i(o,u){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a({variables:{id:e.id,documentId:o,url:u}});case 2:return s=r.sent,n((0,x.Hn)(sn(o,u))),n((0,g.UF)((0,P.Z)(t,sn(o,u)))),r.abrupt("return",s);case 6:case"end":return r.stop()}}),i)})));return function(n,e){return i.apply(this,arguments)}}(),mn=function(){var n=D(r().mark((function n(e){var t,a,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e?T:V){n.next=3;break}return n.abrupt("return");case 3:return t=e?X:z,a=e?en:rn,e?h.Z.nominee_aadhar.items[0].id:h.Z.nominee_aadhar.items[1].id,n.next=8,(0,b.Z)(t);case 8:if(i=n.sent,!t){n.next=14;break}return n.next=12,cn(a.id,i);case 12:n.next=15;break;case 14:console.log("docs can only be updated, not created");case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),ln=function(){var i=D(r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(R?U?en||T?!(!rn&&!V)||(alert("Please Select Nominee Aadhar Back"),null):(alert("Please Select Nominee Aadhar Front"),null):(alert("Please Enter Nominee Relation"),null):(alert("Please Enter Nominee Name"),null)){r.next=3;break}return r.abrupt("return");case 3:return I(!0),r.prev=4,r.next=7,a({variables:{id:e.id,nomineeName:R,nomineeRelationship:U}});case 7:return r.next=9,n((0,x.Hn)(Z({},e,{nomineeName:R,nomineeRelationship:U})));case 9:return r.next=11,n((0,g.UF)((0,P.Z)(t,Z({},e,{nomineeName:R,nomineeRelationship:U}))));case 11:return r.next=13,mn(!0);case 13:return r.next=15,mn(!1);case 15:y.ZP.success("Nominee Updated Succesfully"),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(4),console.log(r.t0);case 21:I(!1);case 22:case"end":return r.stop()}}),i,null,[[4,18]])})));return function(){return i.apply(this,arguments)}}();return(0,p.useEffect)((function(){k&&k.updateDocumentStatusByAdmin.id===en.id&&tn(Z({},en,{status:k.updateDocumentStatusByAdmin.status})),k&&k.updateDocumentStatusByAdmin.id===rn.id&&on(Z({},rn,{status:k.updateDocumentStatusByAdmin.status}))}),[k]),(0,p.useEffect)((function(){var n,t;e&&(e.nomineeName?(C(e.nomineeName),E(e.nomineeRelationship)):e.nominee&&(C(e.nominee.name),E(e.nominee.relationship)),e.documents&&(null===e||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(t=e.documents)||void 0===t||t.find((function(n){n.title.toLowerCase()===h.Z.nominee_aadhar.items[1].id&&(M(n.url),on(n)),n.title.toLowerCase()===h.Z.nominee_aadhar.items[0].id&&(W(n.url),tn(n))}))))}),[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.ZP,{container:!0,p:2,spacing:2,children:[(0,i.jsx)(u.ZP,{item:!0,xs:4,children:(0,i.jsx)(s.Z,{id:"outlined",label:"Full Name*",fullWidth:!0,value:R,variant:"outlined",onChange:function(n){C(n.target.value),G(!0)}})}),(0,i.jsx)(u.ZP,{item:!0,xs:4,children:(0,i.jsx)(s.Z,{label:"Relationship",variant:"outlined",fullWidth:!0,value:U,onChange:function(n){E(n.target.value),G(!0)}})}),(0,i.jsx)(u.ZP,{item:!0,xs:4})]}),(0,i.jsxs)(u.ZP,{container:!0,p:2,spacing:2,children:[(0,i.jsx)(u.ZP,{item:!0,xs:4,children:X&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.TV,{children:(0,i.jsx)(j.HI,{src:"object"==typeof X?URL.createObjectURL(X):X,children:(0,i.jsx)("img",{style:{marginTop:"10px",cursor:"pointer"},src:"object"==typeof X?URL.createObjectURL(X):X,height:200,width:200})})}),(0,i.jsxs)(d.Z,{children:["Status :"," ",(0,i.jsxs)("span",{style:{color:en?"APPROVED"===en.status?"green":"REJECTED"===en.status&&"red":""},children:[" ",k&&k.updateDocumentStatusByAdmin.id===en.id?k.updateDocumentStatusByAdmin.status:en?en.status:null]})]}),(0,i.jsxs)(c.Z,{variant:"contained",component:"label",sx:{margin:"10px 0"},children:["Upload Aadhar Card Front",(0,i.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(n){n.target.files.length>0&&(W(n.target.files[0]),L(!0))}})]}),(0,i.jsxs)(u.ZP,{children:[(0,i.jsx)(c.Z,{variant:"outlined",onClick:function(){return dn(en.id,"APPROVED")},color:"success",sx:{ml:2},children:"Approve"}),(0,i.jsx)(c.Z,{variant:"outlined",onClick:function(){return dn(en.id,"REJECTED")},color:"error",sx:{ml:2},children:"Reject"})]})]})}),(0,i.jsx)(u.ZP,{item:!0,xs:4,children:z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.TV,{children:(0,i.jsx)(j.HI,{src:"object"==typeof z?URL.createObjectURL(z):z,children:(0,i.jsx)("img",{style:{marginTop:"10px",cursor:"pointer"},src:"object"==typeof z?URL.createObjectURL(z):z,height:200,width:200})})}),(0,i.jsxs)(d.Z,{children:["Status :"," ",(0,i.jsx)("span",{style:{color:rn?"APPROVED"===rn.status?"green":"REJECTED"===rn.status&&"red":""},children:k&&k.updateDocumentStatusByAdmin.id===rn.id?k.updateDocumentStatusByAdmin.status:rn?rn.status:null})]}),(0,i.jsxs)(c.Z,{variant:"contained",component:"label",sx:{margin:"10px 0"},children:["Upload Aadhar Card Back",(0,i.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(n){n.target.files.length>0&&(M(n.target.files[0]),J(!0),G(!0))}})]}),(0,i.jsxs)(u.ZP,{children:[(0,i.jsx)(c.Z,{variant:"outlined",onClick:function(){return dn(rn.id,"APPROVED")},color:"success",sx:{ml:2},children:"Approve"}),(0,i.jsx)(c.Z,{variant:"outlined",onClick:function(){return dn(rn.id,"REJECTED")},color:"error",sx:{ml:2},children:"Reject"})]})]})}),(0,i.jsx)(u.ZP,{item:!0,xs:4}),(0,i.jsx)(m.Z,{}),(0,i.jsxs)(d.Z,{component:"form",mt:2,children:[(0,i.jsx)(l.Z,{loading:B,variant:"contained",component:"label",disabled:!Y,onClick:function(){ln()},children:"Submit"}),(0,i.jsx)(y.x7,{position:"bottom-center",reverseOrder:!1})]})]})]})}},77502:function(n,e,t){"use strict";t.d(e,{Fm:function(){return u},HF:function(){return o},QX:function(){return i},p1:function(){return r}});var a=t(81621),r=(0,a.Ps)("\nmutation updateDataByAdmin (\n$id: String!,\n$name: String,\n$father_or_husband_name: String,\n$date_of_birth: String,\n$mobile_number: String,\n$alternate_mobile_number: String,\n$email: String,\n$demat_account: String,\n$nomineeName: String,\n$nomineeRelationship: String,\n$documentId: String,\n$url: String,\n$amount: Int,\n){updateDataByAdmin(\n  data: \n  { \n      id: $id\n      name: $name\n      father_or_husband_name: $father_or_husband_name\n      date_of_birth:$date_of_birth\n      mobile_number:$mobile_number\n      alternate_mobile_number:$alternate_mobile_number\n      email:$email\n      demat_account:$demat_account\n      nomineeName: $nomineeName\n      nomineeRelationship: $nomineeRelationship\n      documentId: $documentId\n      url: $url\n      amount: $amount\n  })\n  {\n    name\n    documents{\n      id\n      title\n      url\n      amount\n    }\n  }\n}"),i=(0,a.Ps)("\nmutation updateStatus (\n$id: String!,\n$kyc: KYC!,\n){updateStatus(\n  data: \n  { \n      id: $id\n      kyc: $kyc\n  })\n  {\n    kyc\n  }\n}"),o=(0,a.Ps)("\nmutation updateDocumentStatusByAdmin (\n$id: String!,\n$status: STATUS!,\n){updateDocumentStatusByAdmin(\n  data: \n  { \n      id: $id\n      status: $status\n  })\n  {\n    id\n    status\n  }\n}"),u=(0,a.Ps)("\nquery getAllKycHandler {\n  getAllKycHandler{\n    userId\n    handlerId\n    updatedKycStatus\n  }\n}\n")},42480:function(n,e){"use strict";e.Z={aadhar:{id:"aadhar",name:"Aadhar Card",status:"",items:[{id:"aadhar_front",name:"AADHAR Card Front",status:""},{id:"aadhar_back",name:"AADHAR Card Back",status:""}]},pancard:{id:"pancard",name:"Pancard",status:"",items:[{id:"pancard",name:"Pan Card",status:""}]},avatar:{id:"photo",name:"Photo",status:"",items:[{id:"avatar",name:"Passport Size Photo",status:""}]},voterId:{id:"voterId",name:"Voter Id Card",status:"Not Uploaded",items:[{id:"voterid_front",name:"Voter Id Front",status:""},{id:"voterid_back",name:"Voted Id Card Back",status:""}]},passbook:{name:"Passbook  or Bank Statement",id:"passbook",status:"Not Uploaded",items:[{id:"passbook",name:"Bank Passbook Or Bank Statement",status:"Not Uploaded"}]},payment_proof:{name:"Payment Proof",id:"payment_proof",status:"Not Uploaded",items:[{id:"payment_proof",name:"Payment Proof"}]},agency_payment_proof:{name:"Agency Payment Proof",id:"agency_payment_proof",status:"Not Uploaded",items:[{id:"agency_payment_proof",name:"Agency Payment Proof"}]},additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},driving_license:{name:"Driving License",id:"driving_license",status:"Not Uploaded",items:[{id:"driving_license_front",name:"Driving License Front",status:""},{id:"driving_license_back",name:"Driving License Back",status:""}]},nominee_aadhar:{name:"Nominee Aadhar",id:"nominee_aadhar",status:"Not Uploaded",items:[{id:"nominee_aadhar_front",name:"AADHAR Card Front",status:""},{id:"nominee_aadhar_back",name:"AADHAR Card Back",status:""}]},demat_document:{name:"Demat Document",id:"demat_document",status:"Not Uploaded",items:[{id:"demat_document",name:"Demat Document",status:""}]},payment_additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},project_payment:{name:"Project Payment",id:"project_payment",items:[{id:"project_payment_1",name:"Payment Document"},{id:"project_payment_2",name:"Payment Document"},{id:"project_payment_3",name:"Payment Document"},{id:"project_payment_4",name:"Payment Document"},{id:"project_payment_5",name:"Payment Document"}]}}},85109:function(n,e){"use strict";e.Z=function(n,e){var t=[];return n.map((function(n){e.id===n.id?t.push(e):t.push(n)})),t}},55511:function(n,e,t){"use strict";var a=t(34051),r=t.n(a),i=t(7155),o=t(6154);function u(n,e,t,a,r,i,o){try{var u=n[i](o),s=u.value}catch(d){return void t(d)}u.done?e(s):Promise.resolve(s).then(a,r)}var s=function(){var n,e=(n=r().mark((function n(e){var t,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("document",e),n.next=4,o.Z.post("".concat(i.Z.API_URL,"/documents/upload"),t,{headers:{"Content-Type":"multipart/form-data"}});case 4:return a=n.sent,n.abrupt("return",a.data.url);case 6:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(a,r){var i=n.apply(e,t);function o(n){u(i,a,r,o,s,"next",n)}function s(n){u(i,a,r,o,s,"throw",n)}o(void 0)}))});return function(n){return e.apply(this,arguments)}}();e.Z=s}},function(n){n.O(0,[2005,6093,9990,1162,2937,5133,7058,315,8584,2738,6154,6233,8307,9774,2888,179],(function(){return e=63089,n(n.s=e);var e}));var e=n.O();_N_E=e}]);