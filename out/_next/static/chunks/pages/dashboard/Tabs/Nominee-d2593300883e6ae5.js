(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4229],{58506:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/Tabs/Nominee",function(){return t(32571)}])},32571:function(e,n,t){"use strict";t.r(n);var r=t(34051),a=t.n(r),i=t(85893),o=t(52441),s=t(42480),u=t(46230),c=t(55511),l=t(50319),d=t(8987),m=t(15861),f=t(86886),p=t(50135),h=t(11057),v=t(67720),x=t(87357),b=(t(19662),t(37070),t(93491),t(67294)),y=t(86501);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,a)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){_(i,r,a,o,s,"next",e)}function s(e){_(i,r,a,o,s,"throw",e)}o(void 0)}))}}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==t.return||t.return()}finally{if(s)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(){var e=(0,u.C)((function(e){return e.user.data})),n=(0,b.useState)(""),t=n[0],r=n[1],g=(0,b.useState)(""),_=g[0],j=g[1],w=(0,b.useState)(!1),Z=w[0],A=w[1],C=P((0,l.D)(o.Is),1)[0],S=P((0,l.D)(o.yW),1)[0],N=P((0,l.D)(o.su),1)[0],D=(0,b.useState)(!1),F=D[0],R=D[1],U=(0,b.useState)(!1),I=U[0],L=U[1],E=(0,b.useState)(null),B=E[0],O=E[1],T=(0,b.useState)(null),H=T[0],V=T[1],W=(0,b.useState)(),X=W[0],z=W[1],M=(0,b.useState)(),$=M[0],q=M[1],G=function(){var e=k(a().mark((function e(n,t,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({variables:{id:n,title:r,url:t}});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),J=function(){var e=k(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({variables:{title:t,url:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),K=function(){var e=k(a().mark((function e(n){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n?F:I){e.next=3;break}return e.abrupt("return");case 3:if(t=n?X:$,r=n?s.Z.nominee_aadhar.items[0].id:s.Z.nominee_aadhar.items[1].id,i="","nominee_aadhar_front"!==r){e.next=13;break}return e.next=9,(0,c.Z)(B);case 9:i=e.sent,y.ZP.success("Nominee Aadhar Front Updated"),e.next=17;break;case 13:return e.next=15,(0,c.Z)(H);case 15:i=e.sent,y.ZP.success("Nominee Aadhar Back Updated");case 17:if(!t){e.next=22;break}return e.next=20,G(t.id,i,r);case 20:e.next=24;break;case 22:return e.next=24,J(i,r);case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=k(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t?_?X||F?!(!$&&!I)||(alert("Please Select Nominee Aadhar Back"),null):(alert("Please Select Nominee Aadhar Front"),null):(alert("Please Enter Nominee Relation"),null):(alert("Please Enter Nominee Name"),null)){e.next=3;break}return e.abrupt("return");case 3:return A(!0),e.prev=4,e.next=7,N({variables:{name:t,relationship:_}});case 7:return e.next=9,K(!0);case 9:return e.next=11,K(!1);case 11:y.ZP.success("Nominee Updated Succesfully"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:A(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}();return(0,b.useEffect)((function(){e&&(e.nominee&&(r(e.nominee.name),j(e.nominee.relationship)),e.documents&&e.documents.length>0&&e.documents.find((function(e){e.title.toLowerCase()===s.Z.nominee_aadhar.items[0].id?(z(e),O(e.url)):e.title.toLowerCase()===s.Z.nominee_aadhar.items[1].id&&(V(e.url),q(e))})))}),[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{variant:"h4",sx:{my:2},children:"Please Fill the form to enlist nominee"}),(0,i.jsxs)(f.ZP,{container:!0,p:2,spacing:2,children:[(0,i.jsx)(f.ZP,{item:!0,xs:4,children:(0,i.jsx)(p.Z,{id:"outlined",label:"Full Name*",fullWidth:!0,value:t,variant:"outlined",onChange:function(e){r(e.target.value)}})}),(0,i.jsx)(f.ZP,{item:!0,xs:4,children:(0,i.jsx)(p.Z,{label:"Relationship",variant:"outlined",fullWidth:!0,value:_,onChange:function(e){j(e.target.value)}})}),(0,i.jsx)(f.ZP,{item:!0,xs:4})]}),(0,i.jsxs)(f.ZP,{container:!0,p:2,spacing:2,children:[(0,i.jsxs)(f.ZP,{item:!0,xs:4,children:[B?(0,i.jsx)("img",{src:"object"==typeof B?URL.createObjectURL(B):B,height:200,width:200}):null,(0,i.jsxs)(h.Z,{variant:"contained",component:"label",children:["Upload Aadhar Card Front",(0,i.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(e){e.target.files.length>0&&(O(e.target.files[0]),R(!0))}})]})]}),(0,i.jsxs)(f.ZP,{item:!0,xs:4,children:[H?(0,i.jsx)("img",{src:"object"==typeof H?URL.createObjectURL(H):H,height:200,width:200}):null,(0,i.jsxs)(h.Z,{variant:"contained",component:"label",children:["Upload Aadhar Card Back",(0,i.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(e){e.target.files.length>0&&(V(e.target.files[0]),L(!0))}})]})]}),(0,i.jsx)(f.ZP,{item:!0,xs:4}),(0,i.jsx)(v.Z,{}),(0,i.jsxs)(x.Z,{component:"form",mt:2,children:[(0,i.jsx)(d.Z,{loading:Z,variant:"contained",component:"label",onClick:function(){Q()},children:"Submit"}),(0,i.jsx)(y.x7,{position:"bottom-center",reverseOrder:!1})]})]})]})}},42480:function(e,n){"use strict";n.Z={aadhar:{id:"aadhar",name:"Aadhar Card",items:[{id:"aadhar_front",name:"AADHAR Card Front"},{id:"aadhar_back",name:"AADHAR Card Back"}]},pancard:{name:"Pancard",items:[{id:"pancard",name:"Pan Card"}]},avatar:{name:"Photo",items:[{id:"avatar",name:"Passport Size Photo"}]},voterId:{id:"voterId",name:"Voter Id Card",items:[{id:"voterid_front",name:"Voter Id Front"},{id:"voterid_back",name:"Voted Id Card Back"}]},passbook:{name:"Passbook",id:"passbook",items:[{id:"passbook",name:"Bank Passbook"}]},payment_proof:{name:"Payment Proof",id:"payment_proof",items:[{id:"payment_proof",name:"Payment Proof"}]},driving_license:{name:"Driving License",id:"driving_license",items:[{id:"driving_license_front",name:"Driving License Front"},{id:"driving_license_back",name:"Driving License Back"}]},nominee_aadhar:{name:"Nominee Aadhar",items:[{id:"nominee_aadhar_front",name:"AADHAR Card Front"},{id:"nominee_aadhar_back",name:"AADHAR Card Back"}]}}},55511:function(e,n,t){"use strict";var r=t(34051),a=t.n(r),i=t(7155),o=t(70594);function s(e,n,t,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,a)}var u=function(){var e,n=(e=a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("document",n),e.next=4,o.Z.post("".concat(i.Z.API_URL,"/documents/upload"),t,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data.url);case 6:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){s(i,r,a,o,u,"next",e)}function u(e){s(i,r,a,o,u,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();n.Z=u}},function(e){e.O(0,[2005,6944,5443,887,2937,7058,315,8584,2738,594,6233,937,9774,2888,179],(function(){return n=58506,e(e.s=n);var n}));var n=e.O();_N_E=n}]);