(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1341],{76890:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/project/Tabs/Payment/Components/DocumentRow",function(){return n(30313)}])},30313:function(e,t,n){"use strict";n.r(t);var r=n(47568),a=n(14924),o=n(26042),i=n(69396),s=n(828),u=n(29815),c=n(97582),l=n(85893),d=n(4749),f=n(34753),h=n(26183),m=n(89448),p=n(29792),v=n(50319),g=n(8987),A=n(2734),E=n(87357),Z=n(11057),b=n(50135),D=n(15861),y=n(53816),x=n(53252),_=n(67294),N=n(86501);t.default=function(e){var t=e.data,n=e.documents,T=void 0===n?[]:n,C=e.user,P=e.rowNo,j=e.projectTitle,R=e.hideAdditionalDocuments,w=(0,A.Z)(),I=(0,_.useState)([]),O=I[0],k=I[1],S=(0,_.useState)([]),L=S[0],G=S[1],V=(0,_.useState)(P),B=V[0],U=V[1],F=(0,s.Z)((0,v.D)(d.Is),1)[0],J=(0,s.Z)((0,v.D)(d.yW),1)[0],M=(0,_.useState)(j),X=M[0],H=(M[1],(0,_.useState)(["","","",""])),W=H[0],q=H[1],Y=(0,_.useState)(!1),z=Y[0],K=Y[1],Q=(0,_.useState)([]),$=Q[0],ee=(Q[1],(0,h.T)());(0,_.useEffect)((function(){U(P)}),[P]),(0,_.useEffect)((function(){var e=[],n=[],r=!0,a=!1,o=void 0;try{for(var i,s=T[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;e.push(u.url),n.push(u.referralAgencyCode)}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}k(e);var c=["","","",""];q(c),t.config.items.map((function(e){C.documents.map((function(t){var n=X.toLowerCase()+"_"+e.id;t.title===n&&(c[parseInt(n[n.length-1])-1]=t.referralAgencyCode||"")}))})),q(c)}),[T,C]);var te=function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,F({variables:{title:e,url:t,referralAgencyCode:n}})];case 1:return[2,r.sent()]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),ne=function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,J({variables:{id:e,title:t,url:n}})];case 1:return[2,r.sent()]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),re=function(e,t,n){var r,a=C,s=[];return null===C||void 0===C||null===(r=C.documents)||void 0===r||r.map((function(n){n.id===e?s.push((0,i.Z)((0,o.Z)({},n),{title:"avatar"})):n.title!==t&&s.push(n)})),(0,i.Z)((0,o.Z)({},a),{documents:s})},ae=function(e){var t=!1;return null===$||void 0===$||$.map((function(n){e===n.id&&(t=n.status)})),t},oe=function(){var e=(0,r.Z)((function(){var e,n,r;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:K(!0),a.label=1;case 1:a.trys.push([1,6,,7]),e=function(e){var n,r,a,i,s,l,d,f,h;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return L[e]?(n=j+"_"+t.config.items[e].id,[4,(0,p.Z)(O[e])]):[3,7];case 1:return r=c.sent(),a=W[e],i=T.find((function(e){if(e.title.toLowerCase()===n.toLowerCase())return!0})),(s=null===C||void 0===C?void 0:C.documents)||(s=[]),i?[4,ne(i.id,n.toLowerCase(),r)]:[3,4];case 2:return l=c.sent(),[4,ee((0,m.j2)(re(i.id,n)))];case 3:return c.sent(),N.ZP.success("".concat(n," Uploaded")),(d=s.filter((function(e){return e.id!==document.id}))).push(l.data.updateDocument),s=d,[3,6];case 4:return[4,te(n.toLowerCase(),r,a)];case 5:f=c.sent(),N.ZP.success("".concat(n," Uploaded")),s=(0,u.Z)(s).concat([f.data.createDocument]),c.label=6;case 6:(h=(0,o.Z)({},C)).documents=s,ee((0,m.j2)(h)),c.label=7;case 7:return[2]}}))},n=0,a.label=2;case 2:return n<B?[5,(0,c.__values)(e(n))]:[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return r=a.sent(),console.log("error",r),[3,7];case 7:return K(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(y.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(x.Z,{sx:(0,a.Z)({display:"flex",flexDirection:"column",border:"none"},w.breakpoints.down("sm"),{paddingRight:0}),children:function(){for(var e=[],n=(t.config.items,0);n<B;n++){var r=O[n];r&&e.push((0,l.jsx)("div",{style:{marginTop:15},children:(0,l.jsx)("img",{src:"object"==typeof r?URL.createObjectURL(r):r,height:150,style:{marginLeft:"5px"}})}))}return 0==e.length?(0,l.jsx)(D.Z,{variant:"subtitle1",children:"No Document"}):e}()}),(0,l.jsx)(x.Z,{style:{border:"none"},children:function(){for(var e=function(e){var t,o,i,s,c,d=(0,u.Z)(W);n.push((0,l.jsxs)(E.Z,{sx:(0,a.Z)({height:160,marginTop:1,marginLeft:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},w.breakpoints.down("sm"),{marginLeft:0,marginTop:2}),children:[(0,l.jsxs)(E.Z,{sx:(0,a.Z)({marginBottom:"10px",marginLeft:"15px"},w.breakpoints.down("sm"),{marginBottom:"0px"}),children:["Status:"," ",(0,l.jsx)("span",{style:{color:"APPROVED"===ae(null===(t=T[e])||void 0===t?void 0:t.id)?"green":"REJECTED"===ae(null===(o=T[e])||void 0===o?void 0:o.id)?"red":T[e]?"APPROVED"===T[e].status?"green":"REJECTED"===T[e].status&&"red":""},children:ae(null===(i=T[e])||void 0===i?void 0:i.id)||(null===(s=T[e])||void 0===s?void 0:s.status)||"NOT STARTED"})]}),(0,l.jsxs)(Z.Z,{style:{cursor:T[e]&&"APPROVED"===T[e].status?"not-allowed":"pointer",marginTop:"10px"},component:"label",color:T[e]&&"APPROVED"===T[e].status?"secondary":"primary",children:["Choose ",null===(c=r[e])||void 0===c?void 0:c.name,(0,l.jsx)("input",{type:"file",accept:"image/*",hidden:!0,disabled:!!T[e]&&"APPROVED"===T[e].status,onChange:function(t){if(t.target.files.length>0){var n=(0,u.Z)(O);n[e]=t.target.files[0],k(n);var r=(0,u.Z)(L);r[e]=!0,G(r)}}})]}),(0,l.jsx)(b.Z,{required:!0,id:"outlined",label:"Referral Agency Code",disabled:(null===C||void 0===C?void 0:C.kyc)===f.Z.status.APPROVED,fullWidth:!0,value:W[e],variant:"outlined",onChange:function(t){t.target.value?d[e]=t.target.value:d[e]=null,q(d)}})]}))},n=[],r=t.config.items,o=0;o<B;o++)e(o);return n}()})]}),(0,l.jsxs)("div",{style:{marginBottom:40},children:[B<=10&&(0,l.jsx)(g.Z,{variant:"contained",disabled:O.length!==B,onClick:function(){U(B+1)},children:"Add More"}),(0,l.jsx)(g.Z,{sx:{marginLeft:1},variant:"contained",onClick:R,children:"Go Back"}),(0,l.jsx)(g.Z,{sx:{marginLeft:1},loading:z,variant:"contained",onClick:function(){oe()},children:"Upload"})]})]})}},34753:function(e,t){"use strict";t.Z={project:{AGRA:"agra",HAJIPUR:"hajipur",HYDERABAD:"hyderabad"},role:{ADMIN:"ADMIN",AGENT:"AGENT",USER:"USER"},membership:{ADVANCE:"ADVANCE",BASIC:"BASIC"},status:{AGENT_APPROVED:"AGENT_APPROVED",APPROVED:"APPROVED",NOT_INITIALIZED:"NOT_INITIALIZED",ONGOING:"ONGOING",PENDING:"PENDING",REJECTED:"REJECTED",SUBMITTED:"SUBMITTED"},amount:{beforeFifteenthAugustBasicAmount:1e3,beforeFifteenthAugustAdvanceAmount:1e5,afterFifteenthAugustBasicAmount:2e3,afterFifteenthAugustAdvanceAmount:2e5}}},29792:function(e,t,n){"use strict";var r=n(47568),a=n(97582),o=n(5121),i=function(){var e=(0,r.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:(t=new FormData).append("document",e),console.log("img",e,"form",t),r.label=1;case 1:return r.trys.push([1,3,,4]),console.log("NEXR","https://kycramaerabackend.ramaera.com"),[4,o.Z.post("".concat("https://kycramaerabackend.ramaera.com","/documents/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return[2,r.sent().data.url];case 3:return n=r.sent(),console.log(n),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();t.Z=i}},function(e){e.O(0,[1385,400,9260,9213,4753,6827,6549,7305,7058,788,8584,8764,5121,1253,9774,2888,179],(function(){return t=76890,e(e.s=t);var t}));var t=e.O();_N_E=t}]);