"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6721],{76721:function(e,t,n){n.r(t);var r=n(47568),a=n(14924),i=n(26042),s=n(69396),o=n(828),u=n(29815),l=n(97582),c=n(85893),d=n(4749),f=n(26183),m=n(89448),h=n(16696),p=n(50319),v=n(8987),g=n(2734),x=n(87357),Z=n(11057),b=n(50135),y=n(15861),j=n(53816),w=n(53252),D=n(67294),C=n(86501);t.default=function(e){var t=e.data,n=e.cardId,E=e.cardUserId,P=e.documents,_=void 0===P?[]:P,R=e.user,T=e.rowNo,k=(e.hideAdditionalDocuments,(0,g.Z)()),A=(0,D.useState)([]),I=A[0],L=A[1],N=(0,D.useState)([]),O=N[0],S=N[1],U=(0,D.useState)([]),V=U[0],z=U[1],B=(0,D.useState)([]),F=B[0],J=B[1],M=(0,D.useState)(T),W=M[0],q=M[1],G=(0,o.Z)((0,p.D)(d.zz),1)[0],H=(0,o.Z)((0,p.D)(d.ar),1)[0],K=(0,D.useState)(!1),Q=K[0],X=K[1],Y=(0,D.useState)([]),$=Y[0],ee=(Y[1],(0,f.T)());(0,D.useEffect)((function(){var e=[],t=[],n=[],r=!0,a=!1,i=void 0;try{for(var s,o=_[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;e.push(u.url),t.push(u.utrNo),n.push(u.amount)}}catch(l){a=!0,i=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}L(e),z(t),J(n)}),[_,R]);var te=function(){var e=(0,r.Z)((function(e,t,n,r,a,i){return(0,l.__generator)(this,(function(s){switch(s.label){case 0:return[4,G({variables:{title:e,url:t,cardUserId:r,myCardId:n,amount:parseInt(i),utrNo:a}})];case 1:return[2,s.sent()]}}))}));return function(t,n,r,a,i,s){return e.apply(this,arguments)}}(),ne=(function(){var e=(0,r.Z)((function(e,t,n,r,a,i,s){return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return[4,H({variables:{title:t,url:n,amount:r,cardUserId:a,myCardId:i,utrNo:s,id:e}})];case 1:return[2,o.sent()]}}))}))}(),function(e){var t=!1;return null===$||void 0===$||$.map((function(n){e===n.id&&(t=n.status)})),t}),re=function(e,t,n){var r,a=R,o=[];return null===R||void 0===R||null===(r=R.documents)||void 0===r||r.map((function(n){n.id===e?o.push((0,s.Z)((0,i.Z)({},n),{title:"avatar"})):n.title!==t&&o.push(n)})),(0,s.Z)((0,i.Z)({},a),{documents:o})},ae=function(){var e=(0,r.Z)((function(){var e,r,a;return(0,l.__generator)(this,(function(s){switch(s.label){case 0:X(!0),s.label=1;case 1:s.trys.push([1,6,,7]),e=function(e){var r,a,s,o,c,d,f;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return O[e]?(r=t.config.items[e].id,[4,(0,h.Z)(I[e])]):[3,8];case 1:return a=l.sent(),s=_.find((function(e){if(e.title.toLowerCase()===r.toLowerCase())return!0})),(o=null===R||void 0===R?void 0:R.documents)||(o=[]),s?[4,H({variables:{title:r,url:a,amount:F[e],cardUserId:E,myCardId:n,utrNo:V[e],id:s.id}})]:[3,4];case 2:return l.sent(),[4,ee((0,m.j2)(re(s.id,r)))];case 3:return l.sent(),C.ZP.success("".concat(r," Uploaded")),(c=o.filter((function(e){return e.id!==(null===document||void 0===document?void 0:document.id)}))).push(resp.data.updateDocument),o=c,[3,7];case 4:return[4,te(r,a,n,E,V[e],F[e])];case 5:return d=l.sent(),C.ZP.success("Document Uploaded"),[4,ee((0,m.j2)(re(s.id,r)))];case 6:l.sent(),o=(0,u.Z)(o).concat([d.data.createDocument]),l.label=7;case 7:(f=(0,i.Z)({},R)).documents=o,ee((0,m.j2)(f)),l.label=8;case 8:return[2]}}))},r=0,s.label=2;case 2:return r<W?[5,(0,l.__values)(e(r))]:[3,5];case 3:s.sent(),s.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return a=s.sent(),console.log("error",a),[3,7];case 7:return X(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.Z,{sx:(0,a.Z)({border:"none",fontWeight:800,marginTop:2},k.breakpoints.down("sm"),{textAlign:"center"}),children:t.config.name}),(0,c.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"row","&:last-child td, &:last-child th":{border:0}},children:[(0,c.jsxs)(x.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,c.jsx)(w.Z,{sx:(0,a.Z)({display:"flex",flexDirection:"column",border:"none"},k.breakpoints.down("sm"),{paddingRight:0}),children:function(){for(var e=function(e){var t=I[e],r=V[e],a=F[e];t&&n.push((0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)("img",{src:"object"==typeof t?URL.createObjectURL(t):t,height:150,style:{marginLeft:"5px"}}),(0,c.jsxs)(x.Z,{sx:{},children:[(0,c.jsx)(x.Z,{children:(0,c.jsx)(b.Z,{sx:{width:150,marginLeft:3},id:"outlined",label:"Amount*",value:a,variant:"outlined",type:"number",onChange:function(t){var n=(0,u.Z)(F);n[e]=t.target.value,J(n)}})}),(0,c.jsx)(x.Z,{children:(0,c.jsx)(b.Z,{sx:{width:150,marginLeft:3,marginTop:1},id:"outlined",label:"UTR No*",value:r,variant:"outlined",onChange:function(t){var n=(0,u.Z)(V);n[e]=t.target.value,z(n)}})})]})]}))},n=[],r=(t.config.items,0);r<W;r++)e(r);return 0==n.length?(0,c.jsx)(y.Z,{variant:"subtitle1",children:"No Document"}):n}()}),(0,c.jsx)(w.Z,{style:{border:"none"},children:function(){for(var e=function(e){var t,i,s,o,l,d,f;n.push((0,c.jsxs)(x.Z,{sx:(0,a.Z)({width:200,marginTop:1,marginLeft:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},k.breakpoints.down("sm"),{marginLeft:0,marginTop:2}),children:[(0,c.jsxs)(x.Z,{sx:(0,a.Z)({marginBottom:"10px",marginLeft:"15px"},k.breakpoints.down("sm"),{marginBottom:"0px"}),children:["Status:"," ",(0,c.jsx)("span",{style:{color:"APPROVED"===ne(null===(t=_[e])||void 0===t?void 0:t.id)?"green":"REJECTED"===ne(null===(i=_[e])||void 0===i?void 0:i.id)?"red":_[e]?"APPROVED"===_[e].status?"green":"REJECTED"===_[e].status&&"red":""},children:ne(null===(s=_[e])||void 0===s?void 0:s.id)||(null===(o=_[e])||void 0===o?void 0:o.status)||"NOT STARTED"})]}),(0,c.jsxs)(Z.Z,{style:{cursor:_[e]&&"APPROVED"===_[e].status?"not-allowed":"pointer",marginTop:"10px"},disabled:"APPROVED"===ne(null===(l=_[e])||void 0===l?void 0:l.id)||"APPROVED"==(null===(d=_[e])||void 0===d?void 0:d.status),component:"label",color:_[e]&&"APPROVED"===_[e].status?"secondary":"primary",children:["Choose ",null===(f=r[e])||void 0===f?void 0:f.name,(0,c.jsx)("input",{type:"file",accept:"image/*",hidden:!0,disabled:!!_[e]&&"APPROVED"===_[e].status,onChange:function(t){if(t.target.files.length>0){var n=(0,u.Z)(I);n[e]=t.target.files[0],L(n);var r=(0,u.Z)(O);r[e]=!0,S(r)}}})]})]}))},n=[],r=t.config.items,i=0;i<W;i++)e(i);return n}()})]}),(0,c.jsx)(x.Z,{})]},t.config.name),W<=3&&(0,c.jsx)(v.Z,{variant:"contained",disabled:I.length!==W,onClick:function(){q(W+1)},children:"Add More"}),(0,c.jsx)(v.Z,{sx:{marginLeft:1},loading:Q,variant:"contained",onClick:function(){ae()},children:"Upload"}),(0,c.jsx)(C.x7,{position:"bottom-center",reverseOrder:!1})]})}},16696:function(e,t,n){var r=n(47568),a=n(97582),i=n(5121),s=function(){var e=(0,r.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:(t=new FormData).append("document",e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.Z.post("".concat("https://kycramaerabackend.ramaera.com","/documents/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return[2,r.sent().data.url];case 3:return n=r.sent(),console.log(n),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();t.Z=s}}]);