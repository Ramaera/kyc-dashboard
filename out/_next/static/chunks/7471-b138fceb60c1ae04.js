"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7471],{77471:function(n,e,t){t.r(e),t.d(e,{rows:function(){return L}});var a=t(34051),r=t.n(a),o=t(85893),i=t(87357),c=t(86886),u=t(50135),s=t(11057),d=t(15861),l=t(53816),m=t(53252),p=t(94054),f=t(47312),v=t(80788),h=t(30431),y=t(67294),x=t(50319),_=t(42480),b=t(86501),j=t(77502),P=t(55511),g=t(9473),k=t(61636),D=t(99099),Z=t(85109),w=t(71455),A=t(8987);function S(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=n[t];return a}function C(n,e,t,a,r,o,i){try{var c=n[o](i),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(a,r)}function U(n){return function(){var e=this,t=arguments;return new Promise((function(a,r){var o=n.apply(e,t);function i(n){C(o,a,r,i,c,"next",n)}function c(n){C(o,a,r,i,c,"throw",n)}i(void 0)}))}}function E(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function R(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),a.forEach((function(e){E(n,e,t[e])}))}return n}function O(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var a,r,o=[],i=!0,c=!1;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(u){c=!0,r=u}finally{try{i||null==t.return||t.return()}finally{if(c)throw r}}return o}}(n,e)||I(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(n){return function(n){if(Array.isArray(n))return S(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||I(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(n,e){if(n){if("string"===typeof n)return S(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(n,e):void 0}}var L=[{config:_.Z.project_payment}],N=function(n){var e=n.data,t=n.documents,a=void 0===t?[]:t,p=n.user,f=n.rowNo,v=n.getProjectName,h=n.isPaymentDocument,_=(0,y.useState)(v),g=_[0],k=_[1],D=(0,y.useState)([]),Z=D[0],S=D[1],C=(0,y.useState)([]),E=C[0],I=C[1],L=(0,y.useState)(0),N=L[0],F=L[1],H=(0,y.useState)([]),V=H[0],B=H[1],W=(0,y.useState)([null,null,null,null]),J=W[0],z=W[1];(0,y.useEffect)((function(){F(f),k(v)}),[f,v]);var M=O((0,x.D)(j.p1),1)[0],$=O((0,x.D)(j.HF),1)[0],q=(0,y.useState)(!1),G=q[0],K=q[1];(0,y.useEffect)((function(){var n=[],t=!0,r=!1,o=void 0;try{for(var i,c=a[Symbol.iterator]();!(t=(i=c.next()).done);t=!0){var u=i.value;n.push(u.url)}}catch(d){r=!0,o=d}finally{try{t||null==c.return||c.return()}finally{if(r)throw o}}S(n);var s=[null,null,null,null];e.config.items.map((function(n){var e;null===p||void 0===p||null===(e=p.documents)||void 0===e||e.map((function(e){e.title===g+n.id&&(s[parseInt(e.title.slice(16+g.length,17+g.length))-1]=e.amount)}))})),z(s)}),[a,p,g]);var Q=function(){var n=U(r().mark((function n(e,t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),X=function(){var n=U(r().mark((function n(e,t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M({variables:{id:null===p||void 0===p?void 0:p.id,documentId:e,url:t}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),Y=function(){var n=U(r().mark((function n(){var e;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:if(!(e<N)){n.next=10;break}if(!J[e]){n.next=7;break}return n.next=5,M({variables:{id:null===p||void 0===p?void 0:p.id,documentId:a[e].id,amount:J[e]}});case 5:n.sent,b.ZP.success("Amount Updated");case 7:e++,n.next=1;break;case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),nn=function(){var n=U(r().mark((function n(e,t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,$({variables:{id:e,status:t}});case 3:n.sent&&("APPROVED"===t?b.ZP.success("Document Status ".concat(t)):b.ZP.error("Document Status ".concat(t)),B((function(n){return T(n).concat([{id:e,status:t}])}))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),b.ZP.error(n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),en=function(n){var e=!1;return null===V||void 0===V||V.map((function(t){n===t.id&&(e=t.status)})),e},tn=function(){var n=U(r().mark((function n(){var t,o,i,c,u,s,d,l;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:K(!0),n.prev=1,t=0;case 3:if(!(t<N)){n.next=32;break}if(!E[t]){n.next=29;break}return o=e.config.items[t].id,n.next=8,(0,P.Z)(Z[t]);case 8:if(i=n.sent,c=a.find((function(n){if(n.title.toLowerCase()===o.toLowerCase())return!0})),(u=null===p||void 0===p?void 0:p.documents)||(u=[]),!c){n.next=22;break}return n.next=15,X(c.id,i);case 15:s=n.sent,b.ZP.success("".concat(o," Uploaded")),(d=u.filter((function(n){return n.id!==document.id}))).push(s.data.updateDocument),u=d,n.next=27;break;case 22:return n.next=24,Q(o,i);case 24:l=n.sent,b.ZP.success("".concat(o," Uploaded")),u=T(u).concat([l.data.createDocument]);case 27:R({},p).documents=u;case 29:t++,n.next=3;break;case 32:n.next=37;break;case 34:n.prev=34,n.t0=n.catch(1),console.log("error",n.t0);case 37:K(!1);case 38:case"end":return n.stop()}}),n,null,[[1,34]])})));return function(){return n.apply(this,arguments)}}();return h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d.Z,{sx:{fontWeight:"bold",marginTop:5},children:[e.config.name," ",e.isOptional?"(Optional)":""]}),(0,o.jsxs)(l.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,o.jsx)(m.Z,{width:300,children:function(){for(var n=[],e=0;e<N;e++){var t=Z[e];t&&n.push((0,o.jsx)("div",{style:{marginTop:15},children:(0,o.jsx)(w.TV,{children:(0,o.jsx)(w.HI,{src:"object"==typeof t?URL.createObjectURL(t):t,children:(0,o.jsx)("img",{src:"object"==typeof t?URL.createObjectURL(t):t,height:150,style:{marginLeft:"5px"}})})})}))}return 0==n.length?(0,o.jsx)(d.Z,{variant:"subtitle1",children:"No Document"}):n}()}),(0,o.jsx)(m.Z,{style:{},children:function(){for(var n=function(n){var e,d=T(J);t.push((0,o.jsxs)("div",{style:{height:160,marginTop:10},children:[(0,o.jsxs)("div",{style:{marginBottom:10},children:["Status:"," ",(0,o.jsx)("span",{style:{color:"APPROVED"===en(a[n].id)?"green":"REJECTED"===en(a[n].id)?"red":a[n]?"APPROVED"===a[n].status?"green":"REJECTED"===a[n].status&&"red":""},children:en(a[n].id)||(null===(e=a[n])||void 0===e?void 0:e.status)})]}),(0,o.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",marginBottom:"10px"},children:(0,o.jsxs)(c.ZP,{children:[(0,o.jsx)(u.Z,{id:"outlined",label:"Amount*",value:J[n],variant:"outlined",type:"number",onChange:function(e){e.target.value?d[n]=parseInt(e.target.value):d[n]=null,z(d)}}),(0,o.jsx)(s.Z,{onClick:function(){return nn(a[n].id,"APPROVED")},variant:"outlined",color:"success",sx:{ml:2},children:"Approve"}),(0,o.jsx)(s.Z,{onClick:function(){return nn(a[n].id,"REJECTED")},variant:"outlined",color:"error",sx:{ml:2},children:"Reject"})]})}),(0,o.jsxs)(s.Z,{fullWidth:!0,style:{marginTop:"10px"},component:"label",children:["Choose ",r[n].name,(0,o.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(e){if(e.target.files.length>0){var t=T(Z);t[n]=e.target.files[0],S(t);var a=T(E);a[n]=!0,I(a)}}})]})]}))},t=[],r=e.config.items,d=0;d<N;d++)n(d);return t}()}),(0,o.jsx)(m.Z,{children:(0,o.jsx)(A.Z,{loading:G,variant:"contained",onClick:function(){tn(),Y()},children:"Update"})})]},e.config.name)]}):(0,o.jsxs)(o.Fragment,{children:[(null===p||void 0===p?void 0:p.name)?(null===p||void 0===p?void 0:p.name)+" is ":(null===p||void 0===p?void 0:p.rm_id)+" is ","not Enrolled in this Project"]})};e.default=function(){var n=(0,g.I0)(),e=(0,g.v9)((function(n){return n.foundUser.foundUser})),t=(0,g.v9)((function(n){return n.allUsers.allTheUsers})),a=(0,y.useState)(0),l=a[0],m=a[1],_=(0,y.useState)("hajipur_"),A=_[0],S=_[1],C=(0,y.useState)(!1),E=(C[0],C[1]),T=(0,y.useState)(!1),I=(T[0],T[1],(0,y.useState)("")),F=I[0],H=I[1],V=(0,y.useState)(!1),B=(V[0],V[1],(0,y.useState)()),W=B[0],J=B[1],z=(0,y.useState)(),M=z[0],$=z[1],q=(0,y.useState)(!1),G=q[0],K=q[1],Q=(0,y.useState)(!1),X=Q[0],Y=Q[1],nn=O((0,x.D)(j.p1),1)[0],en=O((0,x.D)(j.HF),1)[0],tn=function(n){var e=(0,g.v9)((function(n){return n.foundUser.foundUser})),t=[];if(e&&(null===e||void 0===e?void 0:e.documents)){var a=!0,r=!1,o=void 0;try{for(var i,c=function(n,a){var r,o=a.value,i=null===e||void 0===e||null===(r=e.documents)||void 0===r?void 0:r.find((function(n){if(n.title.toLowerCase()===A+o.id.toLowerCase())return!0}));i&&t.push(i)},u=n[Symbol.iterator]();!(a=(i=u.next()).done);a=!0)c(0,i)}catch(s){r=!0,o=s}finally{try{a||null==u.return||u.return()}finally{if(r)throw o}}}return t},an=function(){var n=U(r().mark((function n(){var t,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=0,null===e||void 0===e||null===(t=e.documents)||void 0===t||t.map((function(n){n.title.slice(0,16+A.length)===A+L[0].config.items[0].id.slice(0,-1)&&(a+=1)})),m(a);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,y.useEffect)((function(){an()}),[A]);var rn=function(n,t){var a,r=e,o=[];return null===e||void 0===e||null===(a=e.documents)||void 0===a||a.map((function(e){e.id===n?o.push(R({},e,{url:t})):o.push(e)})),R({},r,{documents:o})},on=function(n,t){var a,r=e,o=[];return null===e||void 0===e||null===(a=e.documents)||void 0===a||a.map((function(e){e.id===n?o.push(R({},e,{amount:t})):o.push(e)})),R({},r,{documents:o})},cn=function(n,t){var a,r=e,o=[];return null===e||void 0===e||null===(a=e.documents)||void 0===a||a.map((function(e){e.id===n?o.push(R({},e,{status:t})):o.push(e)})),R({},r,{documents:o})},un=function(){var e=U(r().mark((function e(a,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en({variables:{id:a,status:o}});case 2:e.sent,n((0,k.Hn)(cn(M.id,o))),n((0,D.UF)((0,Z.Z)(t,cn(M.id,o))));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),sn=function(){var a=U(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,nn({variables:{id:null===e||void 0===e?void 0:e.id,documentId:M.id,amount:parseInt(W)}});case 3:a.sent,n((0,k.Hn)(on(M.id,parseInt(W)))),n((0,D.UF)((0,Z.Z)(t,on(M.id,parseInt(W))))),b.ZP.success("Amount Updated"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),b.ZP.error(a.t0);case 12:E(!1);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(){return a.apply(this,arguments)}}(),dn=function(){var a=U(r().mark((function a(){var o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(E(!0),a.prev=1,o="",!G){a.next=15;break}return a.prev=4,a.next=7,(0,P.Z)(F);case 7:o=a.sent,a.next=13;break;case 10:a.prev=10,a.t0=a.catch(4),b.ZP.error("Error, Try Again!");case 13:a.next=16;break;case 15:o=F;case 16:if(!M){a.next=23;break}return a.next=19,nn({variables:{id:null===e||void 0===e?void 0:e.id,documentId:M.id,url:o}});case 19:n((0,k.Hn)(rn(M.id,o))),n((0,D.UF)((0,Z.Z)(t,rn(M.id,o)))),a.next=24;break;case 23:console.log("we need access token of user to create any doc");case 24:b.ZP.success("Payment Slip Updated "),a.next=30;break;case 27:a.prev=27,a.t1=a.catch(1),b.ZP.error(a.t1);case 30:E(!1);case 31:case"end":return a.stop()}}),a,null,[[1,27],[4,10]])})));return function(){return a.apply(this,arguments)}}();(0,y.useEffect)((function(){var n,t;($(null),H(null),J(null),e&&(null===e||void 0===e?void 0:e.documents)&&(null===e||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.length)>0)&&(null===e||void 0===e||null===(t=e.documents)||void 0===t||t.find((function(n){n.title.toLowerCase()===A+L[0].config.id&&($(n),H(n.url),J(n.amount))})))}),[e,A]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{width:150,children:(0,o.jsxs)(p.Z,{variant:"outlined",fullWidth:!0,children:[(0,o.jsx)(f.Z,{children:"Project"}),(0,o.jsx)(v.Z,{value:A,onChange:function(n){return S(n.target.value)},label:"Project",autoWidth:!0,children:[{id:"hajipur_",name:"Hajipur"},{id:"agra_",name:"Agra"}].map((function(n){return(0,o.jsx)(h.Z,{value:n.id,children:n.name},n.id)}))})]})}),F?(0,o.jsx)(w.TV,{children:(0,o.jsx)(w.HI,{src:"object"==typeof F?URL.createObjectURL(F):F,children:(0,o.jsx)("img",{style:{marginTop:"10px",cursor:"pointer"},src:"object"==typeof F?URL.createObjectURL(F):F,width:200})})}):null,M&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d.Z,{variant:"h4",sx:{my:2},children:["Status :"," ",(0,o.jsx)("span",{style:{color:M?"APPROVED"===M.status?"green":"REJECTED"===M.status&&"red":""},children:M&&M.status})]}),(0,o.jsx)(i.Z,{children:(0,o.jsxs)(c.ZP,{children:[(0,o.jsx)(s.Z,{onClick:function(){return un(M.id,"APPROVED")},variant:"outlined",color:"success",children:"Approve"}),(0,o.jsx)(s.Z,{onClick:function(){return un(M.id,"REJECTED")},variant:"outlined",color:"error",sx:{ml:2},children:"Reject"})]})})]}),F&&(0,o.jsxs)(c.ZP,{container:!0,p:2,mt:2,pl:0,spacing:2,children:[(0,o.jsx)(u.Z,{id:"outlined",label:"Amount*",value:W,variant:"outlined",type:"number",onChange:function(n){J(n.target.value)}}),(0,o.jsx)(c.ZP,{item:!0,children:(0,o.jsx)(s.Z,{fullWidth:!0,variant:"contained",component:"label",onClick:function(){sn()},children:"Submit Amount"})})]}),(0,o.jsxs)(c.ZP,{container:!0,p:2,pl:0,spacing:2,children:[M&&(0,o.jsx)(c.ZP,{item:!0,xs:4,children:(0,o.jsxs)(s.Z,{variant:"contained",component:"label",children:["Select Payment Slip",(0,o.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(n){n.target.files.length>0&&(Y(!0),H(n.target.files[0]),K(!0))}})]})}),M&&(0,o.jsx)(c.ZP,{item:!0,xs:2,children:(0,o.jsx)(s.Z,{fullWidth:!0,variant:"contained",disabled:!X,onClick:function(){dn()},children:"Submit"})}),(0,o.jsx)(b.x7,{position:"bottom-center",reverseOrder:!1})]}),(0,o.jsx)(o.Fragment,{children:L.map((function(n,t){return(0,o.jsx)(N,{data:n,rowNo:l,isPaymentDocument:M,user:e,getProjectName:A,documents:tn(n.config.items)},t)}))})]})}},42480:function(n,e){e.Z={aadhar:{id:"aadhar",name:"Aadhar Card",status:"",items:[{id:"aadhar_front",name:"AADHAR Card Front",status:""},{id:"aadhar_back",name:"AADHAR Card Back",status:""}]},pancard:{id:"pancard",name:"Pancard",status:"",items:[{id:"pancard",name:"Pan Card",status:""}]},avatar:{id:"photo",name:"Photo",status:"",items:[{id:"avatar",name:"Passport Size Photo",status:""}]},voterId:{id:"voterId",name:"Voter Id Card",status:"Not Uploaded",items:[{id:"voterid_front",name:"Voter Id Front",status:""},{id:"voterid_back",name:"Voted Id Card Back",status:""}]},passbook:{name:"Passbook  or Bank Statement",id:"passbook",status:"Not Uploaded",items:[{id:"passbook",name:"Bank Passbook Or Bank Statement",status:"Not Uploaded"}]},payment_proof:{name:"Payment Proof",id:"payment_proof",status:"Not Uploaded",items:[{id:"payment_proof",name:"Payment Proof"}]},agency_payment_proof:{name:"Agency Payment Proof",id:"agency_payment_proof",status:"Not Uploaded",items:[{id:"agency_payment_proof",name:"Agency Payment Proof"}]},additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},to_advance_payment_proof:{name:"To Advance Payment Proof",id:"to_advance_payment_proof",status:"Not Uploaded",items:[{id:"to_advance_payment_proof",name:"To Advance Payment Proof"}]},to_advance_additional_documents:{name:"To Advance Additional Payment Document",id:"to_advance_additional_payment_doc",items:[{id:"to_advance_additional_payment_doc2",name:"To Advance Payment Document"},{id:"to_advance_additional_payment_doc3",name:"To Advance Payment Document"},{id:"to_advance_additional_payment_doc4",name:"To Advance Payment Document"},{id:"to_advance_additional_payment_doc5",name:"To Advance Payment Document"}]},driving_license:{name:"Driving License",id:"driving_license",status:"Not Uploaded",items:[{id:"driving_license_front",name:"Driving License Front",status:""},{id:"driving_license_back",name:"Driving License Back",status:""}]},nominee_aadhar:{name:"Nominee Aadhar",id:"nominee_aadhar",status:"Not Uploaded",items:[{id:"nominee_aadhar_front",name:"AADHAR Card Front",status:""},{id:"nominee_aadhar_back",name:"AADHAR Card Back",status:""}]},demat_document:{name:"Demat Document",id:"demat_document",status:"Not Uploaded",items:[{id:"demat_document",name:"Demat Document",status:""}]},payment_additional_documents:{name:"Additional Payment Document",id:"additional_payment_doc",items:[{id:"additional_payment_doc2",name:"Payment Document"},{id:"additional_payment_doc3",name:"Payment Document"},{id:"additional_payment_doc4",name:"Payment Document"},{id:"additional_payment_doc5",name:"Payment Document"}]},project_payment:{name:"Project Payment",id:"project_payment",items:[{id:"project_payment_1",name:"Payment Document"},{id:"project_payment_2",name:"Payment Document"},{id:"project_payment_3",name:"Payment Document"},{id:"project_payment_4",name:"Payment Document"},{id:"project_payment_5",name:"Payment Document"}]}}},85109:function(n,e){e.Z=function(n,e){var t=[];return n.map((function(n){e.id===(null===n||void 0===n?void 0:n.id)?t.push(e):t.push(n)})),t}},55511:function(n,e,t){var a=t(34051),r=t.n(a),o=t(6154);function i(n,e,t,a,r,o,i){try{var c=n[o](i),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(a,r)}var c=function(){var n,e=(n=r().mark((function n(e){var t,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("document",e),n.next=4,o.Z.post("".concat("https://kycramaerabackend.ramaera.com","/documents/upload"),t,{headers:{"Content-Type":"multipart/form-data"}});case 4:return a=n.sent,n.abrupt("return",a.data.url);case 6:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(a,r){var o=n.apply(e,t);function c(n){i(o,a,r,c,u,"next",n)}function u(n){i(o,a,r,c,u,"throw",n)}c(void 0)}))});return function(n){return e.apply(this,arguments)}}();e.Z=c}}]);